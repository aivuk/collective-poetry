<head>
  <title>Collective Poem</title>
  <link href='http://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</head>

<body>
        <div class="invisible-word"><div class="cover">&nbsp;</div><span class="hidden-word"></span></div>
</body>

<template name="poem">
  <div class="container">
  <div id="poem-page" class="row-fluid">
    <div id="poetry" class="span6 offset3">
      <div class="container">
        <div class="row">
            {{#each poem}}
              {{#if this.lineBreak}}
              <span class="space">&nbsp;</span>
              <br/>
              <div class="row">
              <div class="line-break span6"></div>
              </div>
              {{else}}
                  {{> word }}
             {{/if}}
            {{/each}}
       </div>
      </div>
    </div>
  </div>
  </div>
</template>

<template name="word">
    <div class="word">
        <span class="space">&nbsp;</span>
        {{#unless editMode}}
        <span class="word-text">{{wordText}}</span>
        {{else}}
        {{> wordEdit}}
        {{/unless}}
    </div>
</template>

<template name="wordN">
    <div class="word">
        <span class="space{{#unless word}}{{#if lastWord }} last{{/if}}{{/unless}}">&nbsp;</span>
        <span class="word-text{{#if lastWord }} last{{/if}}">{{word}}</span>
    </div>
</template>

<template name="wordEdit">
        <div class="word-edit">
            <input class="word-input" autofocus="autofocus" type="text" value="{{this.word}}">
        </div>
</template>

<template name="poemVersion">
        <div id="poem-{{ pos }}" class="row poem">
            {{#each words}}
              {{#if lineBreak}}
              <br/>
              <div class="row">
              <div class="line-break span6{{#if lastWord }} last{{/if}}"><span>&nbsp;</span></div>
              </div>
              {{else}}
                {{> wordN}}
             {{/if}}
            {{/each}}
       </div>
</template>

<template name="poemHistory">
  <div class="container">
  <div id="poem-page" class="row-fluid">
    <div id="poetry" class="span6 offset3">
      <div class="container">
        {{#each poems}}
        {{> poemVersion}}
        {{/each}}
      </div>
    </div>
  </div>
  </div>
</template>


